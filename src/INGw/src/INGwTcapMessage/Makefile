CC= CC
# For ANSI96 include -DSS7_ANS96 in CFLAGS.
CFLAGS= -c -g -xdebugformat=dwarf -DTU -DIT -DZV -DDV -DST -DZT -DSB -DHI -DSD -DSG -DSH  -DSUNOS -DANSI -DSS7_ANS96 -DSS_MT -DSS -DSS7_AIN -DLCIET -DIET2 -DSS7_AIN_SCP -DIU -DSM -DLITV14 -DMR -DSP -DZP -DSN -DZN -DDN -DTDS_CORE2 -DMR_DFTHA -DZV_DFTHA -DZN_DFTHA -DLIE_LMINT3 -DLST_LMINT3 -DSP_LMINT3 -DSNT2 -DLCLIE -DLCLSP -DLCLST -DLCLIT -DLCLSB -DLCLHI -DLCIET -DLCLRY -DRY_POLL_SUPPORT -DCMFILE_REORG_1 -DITSG -DCM_INET2 -DHI_REL_1_2 -DHI_REL_1_3 -DDEBUGP -DHI006_12 -DCM_ASN_NO_INDEF_LEN -DLCSMSDMILSD -DLCSMSNMILSN -DLCSPLISNT -DSNT2 -DSDT2 -DLCLSN -DLCLSD -DSD_LMINT3 -DSMSD_LMINT3 -DSD_MTP2_IPHASE -D_REENTRANT -D_POSIX_THREAD_SEMANTICS -DSS7_NTT -DSS7_TTC -DGTT_PER_NWK -DLSPV2_8 -DLSPV3_1 -DZPPV3_1 -DCMSS7_SPHDROPT -DSG_FDIS_NO_ACK -DCMINETFLATBUF -DST_LMINT3 -DSP_LMINT3 -DSN_LMINT3 -DIT_TERM_CAUSE_INFO -DLCSDT -DLITV5 -DIT_ABORT_ASSOC -DSTUV3 -DSTUV2 -UINGW_LOOPBACK_SAS -DSS_M_PROTO_REGION -DINC_DLG_AUDIT -DSS7_ANS88 -DSS7_ANS92 -DSS7_ANS96
#  -DINGW_TRACE_CALL_THREAD
SHARED= CC -G

TCAP_SOURCE=INGwTcapMessage/TcapMessage.cpp
TCAP_OBJECTS=TcapMessage.o
#TCAP_INCLUDE_DIRS= -I${TELESYS_ROOT}/INAP/TCAPU -IINGwTcapMessage/ -I${XSD_HOME}  -I${XERCES_HOME}/include -I${INSTALLROOT}/sol28g/include
TCAP_INCLUDE_DIRS= -IINGwTcapMessage/ -I${INSTALLROOT}/sol28g/include -I$(CCPU_STACK_HOME)/cm  -I${INSTALLROOT}/sol28g/include -I$(CCPU_STACK_HOME)/ss/Product  -I$(CCPU_STACK_HOME)/mt/Product -I$(CCPU_STACK_HOME)/iu/Product -I$(CCPU_STACK_HOME)/sd/Product
TCAP_SHARED_LIB=libTcapMessage.so

all: $(TCAP_SHARED_LIB)
	
$(TCAP_SHARED_LIB): $(TCAP_OBJECTS)  
	$(SHARED) $(TCAP_OBJECTS) -o $@

$(TCAP_OBJECTS): $(TCAP_SOURCE) 
	$(CC) $(TCAP_INCLUDE_DIRS) $(CFLAGS) $(TCAP_SOURCE) 

test: $(TCAP_SHARED_LIB) main.cpp
	$(CC) $(TCAP_INCLUDE_DIRS) $(TCAP_SHARED_LIB) main.cpp -o $@

.cpp.o:
	$(CC) $(CFLAGS) $<

clean:
	rm -rf *.o test
