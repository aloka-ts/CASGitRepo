<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_14) on Fri Jun 27 17:25:14 PDT 2008 -->
<TITLE>
B2buaHelper (SIP Servlet API 1.1)
</TITLE>

<META NAME="keywords" CONTENT="javax.servlet.sip.B2buaHelper interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="B2buaHelper (SIP Servlet API 1.1)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/servlet/sip/AuthInfo.html" title="interface in javax.servlet.sip"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/servlet/sip/ConvergedHttpSession.html" title="interface in javax.servlet.sip"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?javax/servlet/sip/B2buaHelper.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="B2buaHelper.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.servlet.sip</FONT>
<BR>
Interface B2buaHelper</H2>
<HR>
<DL>
<DT><PRE>public interface <B>B2buaHelper</B></DL>
</PRE>

<P>
Helper class providing support for B2BUA applications. An instance of this
 class can be retrieved from a <code>SipServletRequest</code> by invoking
 the method <A HREF="../../../javax/servlet/sip/SipServletRequest.html#getB2buaHelper()"><CODE>SipServletRequest.getB2buaHelper()</CODE></A>.
<P>

<P>
<DL>
<DT><B>Since:</B></DT>
  <DD>1.1</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#createCancel(javax.servlet.sip.SipSession)">createCancel</A></B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new CANCEL request to cancel the initial request sent on the other
 leg.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest)">createRequest</A></B>(<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;origRequest)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new request object belonging to a new SipSession.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)">createRequest</A></B>(<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;origRequest,
              boolean&nbsp;linked,
              java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;&nbsp;headerMap)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new request object belonging to a new SipSession.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)">createRequest</A></B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session,
              <A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;origRequest,
              java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;&nbsp;headerMap)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new subsequent request based on the specified original
 request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/servlet/sip/SipServletResponse.html" title="interface in javax.servlet.sip">SipServletResponse</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#createResponseToOriginalRequest(javax.servlet.sip.SipSession, int, java.lang.String)">createResponseToOriginalRequest</A></B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session,
                                int&nbsp;status,
                                java.lang.String&nbsp;reasonPhrase)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The request that results in creation of a SipSession is termed as the
 original request, a response to this original request can be created by
 the application even if the request was committed and application does
 not have a reference to this Request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#getLinkedSession(javax.servlet.sip.SipSession)">getLinkedSession</A></B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the other SipSession that is linked to the specified SipSession,
 or null if none.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#getLinkedSipServletRequest(javax.servlet.sip.SipServletRequest)">getLinkedSipServletRequest</A></B>(<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;req)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If a new request is created based on an existing one with the 
 link argument true using <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><CODE>createRequest(SipServletRequest, boolean, java.util.Map)</CODE></A>
 or using <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><CODE>createRequest(SipSession, SipServletRequest, java.util.Map)</CODE></A>
 the new request gets implicitly linked with the original request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../javax/servlet/sip/SipServletMessage.html" title="interface in javax.servlet.sip">SipServletMessage</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#getPendingMessages(javax.servlet.sip.SipSession, javax.servlet.sip.UAMode)">getPendingMessages</A></B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session,
                   <A HREF="../../../javax/servlet/sip/UAMode.html" title="enum in javax.servlet.sip">UAMode</A>&nbsp;mode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For the specified SipSession, returns a List of all uncommitted messages
 in the order of increasing CSeq number for the given mode of the session.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#linkSipSessions(javax.servlet.sip.SipSession, javax.servlet.sip.SipSession)">linkSipSessions</A></B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session1,
                <A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session2)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Links the specified sessions, such that there is a 1-1 mapping
 between them.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/servlet/sip/B2buaHelper.html#unlinkSipSessions(javax.servlet.sip.SipSession)">unlinkSipSessions</A></B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the specified SipSession is linked to another session, then unlinks
 the two sessions from each other.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getLinkedSession(javax.servlet.sip.SipSession)"><!-- --></A><H3>
getLinkedSession</H3>
<PRE>
<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A> <B>getLinkedSession</B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session)</PRE>
<DL>
<DD>Returns the other SipSession that is linked to the specified SipSession,
 or null if none. The sessions get linked by either explicit call to 
 <A HREF="../../../javax/servlet/sip/B2buaHelper.html#linkSipSessions(javax.servlet.sip.SipSession, javax.servlet.sip.SipSession)"><CODE>linkSipSessions(SipSession, SipSession)</CODE></A> or
 <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><CODE>createRequest(SipServletRequest, boolean, java.util.Map)</CODE></A>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session</CODE> - the SipSession from which to obtain the linked session
<DT><B>Returns:</B><DD>the linked SipSession, or null if none
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the session is invalid</DL>
</DD>
</DL>
<HR>

<A NAME="getLinkedSipServletRequest(javax.servlet.sip.SipServletRequest)"><!-- --></A><H3>
getLinkedSipServletRequest</H3>
<PRE>
<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A> <B>getLinkedSipServletRequest</B>(<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;req)</PRE>
<DL>
<DD>If a new request is created based on an existing one with the 
 link argument true using <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><CODE>createRequest(SipServletRequest, boolean, java.util.Map)</CODE></A>
 or using <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><CODE>createRequest(SipSession, SipServletRequest, java.util.Map)</CODE></A>
 the new request gets implicitly linked with the original request. 
 This method is to be used to retrieve the linked request. There is no
 explicit linking/unlinking like that of the session for requests. However unlinking 
 of sessions also result in unlinking of linked requests.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>req</CODE> - other request
<DT><B>Returns:</B><DD>the linked request</DL>
</DD>
</DL>
<HR>

<A NAME="linkSipSessions(javax.servlet.sip.SipSession, javax.servlet.sip.SipSession)"><!-- --></A><H3>
linkSipSessions</H3>
<PRE>
void <B>linkSipSessions</B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session1,
                     <A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session2)</PRE>
<DL>
<DD>Links the specified sessions, such that there is a 1-1 mapping
 between them. Each session can retrieved from the other by calling
 <A HREF="../../../javax/servlet/sip/B2buaHelper.html#getLinkedSession(javax.servlet.sip.SipSession)"><CODE>getLinkedSession(javax.servlet.sip.SipSession)</CODE></A>. One SipSession at any given time can be
 linked to only one other SipSession belonging to the same
 SipApplicationSession. Calling <code>linkSessions()</code> with already 
 linked sessions to each other is a no-op and is to be silently ignored, while 
 calling <code>linkSessions()</code> with any of the session linked with
 <i>other</i> sessions result in <code>java.lang.IllegalArgumentException</code>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session1</CODE> - the first SipSession to link<DD><CODE>session2</CODE> - the other SipSession to link
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if either of the specified sessions
         has been terminated or the sessions do not belong to the same
         application session or one or both the sessions are already linked 
         with some other session(s)
<DD><CODE>java.lang.NullPointerException</CODE> - if any of the arguments is null</DL>
</DD>
</DL>
<HR>

<A NAME="unlinkSipSessions(javax.servlet.sip.SipSession)"><!-- --></A><H3>
unlinkSipSessions</H3>
<PRE>
void <B>unlinkSipSessions</B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session)</PRE>
<DL>
<DD>If the specified SipSession is linked to another session, then unlinks
 the two sessions from each other. This also implicitly unlinks the linkage
 at the request level.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session</CODE> - the session to be unlinked
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the session is not currently linked
         to another session or it has been terminated</DL>
</DD>
</DL>
<HR>

<A NAME="getPendingMessages(javax.servlet.sip.SipSession, javax.servlet.sip.UAMode)"><!-- --></A><H3>
getPendingMessages</H3>
<PRE>
java.util.List&lt;<A HREF="../../../javax/servlet/sip/SipServletMessage.html" title="interface in javax.servlet.sip">SipServletMessage</A>&gt; <B>getPendingMessages</B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session,
                                                     <A HREF="../../../javax/servlet/sip/UAMode.html" title="enum in javax.servlet.sip">UAMode</A>&nbsp;mode)</PRE>
<DL>
<DD>For the specified SipSession, returns a List of all uncommitted messages
 in the order of increasing CSeq number for the given mode of the session.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session</CODE> - the SipSession to check for pending messages<DD><CODE>mode</CODE> - the mode for which the pending messages are required, one of UAC or UAS
<DT><B>Returns:</B><DD>the list of <code>SipServletMessage</code> objects representing
         pending messages for the session, or the empty list if none
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the session is invalid</DL>
</DD>
</DL>
<HR>

<A NAME="createResponseToOriginalRequest(javax.servlet.sip.SipSession, int, java.lang.String)"><!-- --></A><H3>
createResponseToOriginalRequest</H3>
<PRE>
<A HREF="../../../javax/servlet/sip/SipServletResponse.html" title="interface in javax.servlet.sip">SipServletResponse</A> <B>createResponseToOriginalRequest</B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session,
                                                   int&nbsp;status,
                                                   java.lang.String&nbsp;reasonPhrase)</PRE>
<DL>
<DD>The request that results in creation of a SipSession is termed as the
 original request, a response to this original request can be created by
 the application even if the request was committed and application does
 not have a reference to this Request. This is required because the B2BUA
 application may require to send more than one successful response to a
 request. For example when a downstream proxy forked and more than one
 success responses are to be forwarded upstream. This can only be
 required on initial requests, as only original requests shall need such
 multiple responses.

 <p>The response thus generated must have a different <code>To</code> tag from the
 other responses generated to the Request and must result in a different
 SipSession. In this (and similar) cases the container clones the
 original SipSession for the second and subsequentdialogs, as detailed
 above. The cloned session object will contain the same application data
 but its createRequest method will create requests belonging to that
 second or subsequent dialog, that is, with a <code>To</code> tag specific to that
 dialog.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session</CODE> - the SipSession for the original request<DD><CODE>status</CODE> - the status code for the response<DD><CODE>reasonPhrase</CODE> - the reason phrase for the response, or null to use
                     a default reason phrase
<DT><B>Returns:</B><DD>the resulting <code>SipServletResponse</code>
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalStateException</CODE> - if a subsequent response is inconsistent
         with an already sent response. For example, a 400 response
         following a 200 OK response.
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the session is invalid</DL>
</DD>
</DL>
<HR>

<A NAME="createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><!-- --></A><H3>
createRequest</H3>
<PRE>
<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A> <B>createRequest</B>(<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;origRequest,
                                boolean&nbsp;linked,
                                java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;&nbsp;headerMap)
                                throws java.lang.IllegalArgumentException,
                                       <A HREF="../../../javax/servlet/sip/TooManyHopsException.html" title="class in javax.servlet.sip">TooManyHopsException</A></PRE>
<DL>
<DD>Creates a new request object belonging to a new SipSession. The
 new request is similar to the specified <code>origRequest</code>
 in that the method and the majority of header fields are copied
 from <code>origRequest</code> to the new request.  
 The headerMap parameter can contain From, To, Contact, Route headers and any
 non system header. The header field map is then used to override the
 headers in the newly created request.
 The SipSession created for the new request also shares the same 
 SipApplicationSession
 associated with the original request.

 <p>This method satisfies the following rules:
 <ul>
 <li> Whether the From header is overridden through the headerMap or 
 not the    
 From header field of the new request has a new tag chosen by the 
 container. </li>
 <li> If the From header is included in the headerMap and has a tag 
 then it is ignored and container chosen tag is inserted instead. 
 </li>
 <li>The To header field of the new request has no tag.
 <li>Record-Route and Via header fields are not copied. As usual,
     the container will add its own Via header field to the request
     when it's actually sent outside the application server.
 <li>For non-REGISTER requests, the Contact header field is not
     copied but is populated by the container as usual but if Contact 
     header is present in the headerMap then relevant portions of 
     Contact header is to be used in the request created, in accordance
     with section 4.1.3 of the specification.
 </ul>
 
 <p>This method provides a convenient and efficient way of
 constructing the second "leg" of a B2BUA application, giving the 
 additional flexibility of changing the headers including From, To, Contact
 and Route.
 
 <p>This method will also perform loop detection. 
 If the value of the original request's Max-Forwards header field is 0,
 then TooManyHopsException is thrown and a 483 (Too many hops) 
 response is sent for the original request. Otherwise, the value of the 
 new requests Max-Forwards header is set to that of the original request 
 minus one.
 <p>It is used only for the initial request. Subsequent requests in either leg
 must be created using <A HREF="../../../javax/servlet/sip/SipSession.html#createRequest(java.lang.String)"><CODE>SipSession.createRequest(java.lang.String)</CODE></A> or <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><CODE>createRequest(SipSession, SipServletRequest, java.util.Map)</CODE></A> as usual.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>origRequest</CODE> - request to be "copied"<DD><CODE>linked</CODE> - indicating if the resulting session should be linked with original or not<DD><CODE>headerMap</CODE> - a simple map containing header names and their 
 values to be overridden in the new request. The values can be a specified in a 
 <code>java.util.List</code> to accomodate for multi-valued headers
<DT><B>Returns:</B><DD>the "copied" request object
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the headerMap contains a system
 header other than From, To, Contact and Route (see section 4.1.3 to see what part of Contact header is to be used)
 or some other header not relevant for the context, or the <code>origRequest</code> and 
 its session is linked to some other request/session and the <code>linked</code> flag is true,
 or if the <code>origRequest</code> is not initial
<DD><CODE>java.lang.NullPointerException</CODE> - if the original request is null
<DD><CODE><A HREF="../../../javax/servlet/sip/TooManyHopsException.html" title="class in javax.servlet.sip">TooManyHopsException</A></CODE> - if the original request's Max-Forwards header value is 0</DL>
</DD>
</DL>
<HR>

<A NAME="createRequest(javax.servlet.sip.SipServletRequest)"><!-- --></A><H3>
createRequest</H3>
<PRE>
<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A> <B>createRequest</B>(<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;origRequest)</PRE>
<DL>
<DD>Creates a new request object belonging to a new SipSession. The
 new request is similar to the specified <code>origRequest</code>
 in that the method and the majority of header fields are copied
 from <code>origRequest</code> to the new request.  The SipSession
 created for the new request also shares the same SipApplicationSession
 associated with the original request.

 <p>This method satisfies the following rules:
 <ul>
 <li>The From header field of the new request has a new tag chosen
     by the container.
 <li>The To header field of the new request has no tag.
 <li>The new request (and the corresponding <code>SipSession</code>)is
     assigned a new Call-ID.
 <li>Record-Route and Via header fields are not copied. As usual,
     the container will add its own Via header field to the request
     when it's actually sent outside the application server.
 <li>For non-REGISTER requests, the Contact header field is not
     copied but is populated by the container as usual.
 </ul>

 <p>This method provides a convenient and efficient way of
 constructing a new "leg" of a B2BUA application. It is used
 only for the initial request. Subsequent requests in either leg
 must be created using <A HREF="../../../javax/servlet/sip/SipSession.html#createRequest(java.lang.String)"><CODE>SipSession.createRequest(java.lang.String)</CODE></A> or
 <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><CODE>createRequest(SipSession, SipServletRequest, java.util.Map)</CODE></A> as usual.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>origRequest</CODE> - request to be "copied"
<DT><B>Returns:</B><DD>the "copied" request object</DL>
</DD>
</DL>
<HR>

<A NAME="createRequest(javax.servlet.sip.SipSession, javax.servlet.sip.SipServletRequest, java.util.Map)"><!-- --></A><H3>
createRequest</H3>
<PRE>
<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A> <B>createRequest</B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session,
                                <A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A>&nbsp;origRequest,
                                java.util.Map&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;&nbsp;headerMap)
                                throws java.lang.IllegalArgumentException</PRE>
<DL>
<DD>Creates a new subsequent request based on the specified original
 request. This results in automatically linking the two SipSessions
 (if they are not already linked) and the two SipServletRequests.

 <p>This method, though similar to the factory method of creating the
 request for a B2BUA for initial requests, is to be used for subsequent
 requests.
 The semantics are similar to <A HREF="../../../javax/servlet/sip/SipSession.html#createRequest(java.lang.String)"><CODE>SipSession.createRequest(String)</CODE></A> 
 except that here it copies non system headers from the original request
 onto the new request, the system headers are created based on the session
 that this request is created on. Further the Route headers are set as 
 based on the session route set. The method of the new request is same 
 as that of the <code>origRequest</code>.  If Contact header is present in
 the headerMap then relevant portions of the Contact header are to be used
 in the request created, in accordance with section 4.1.3 of the specification.
 If From and To headers are present in the headerMap then all parts of
 those headers except the tag parameter are to be used in the request 
 created, in accordance with section 4.1.2 of the specification.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session</CODE> - the session on which this request is to be created<DD><CODE>origRequest</CODE> - the original request<DD><CODE>headerMap</CODE> - the header map used to override the headers in the new
 subsequent request created. Also see
 <A HREF="../../../javax/servlet/sip/B2buaHelper.html#createRequest(javax.servlet.sip.SipServletRequest, boolean, java.util.Map)"><CODE>createRequest(SipServletRequest, boolean, java.util.Map)</CODE></A>
<DT><B>Returns:</B><DD>the new subsequent request
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if the header map contains a system
 header other than Contact, From or To (see sections 4.1.2 and 4.1.3 of
 specification document) or other header which does not makes sense in the context,
 or in case when the <code>session</code> does not belong to the same
 SipApplicationSession as the <code>origRequest</code>, or the original request or session is
 already linked with some other request/session,
 or if the <code>origRequest</code> is not initial
<DD><CODE>java.lang.NullPointerException</CODE> - if the original request or the session is null</DL>
</DD>
</DL>
<HR>

<A NAME="createCancel(javax.servlet.sip.SipSession)"><!-- --></A><H3>
createCancel</H3>
<PRE>
<A HREF="../../../javax/servlet/sip/SipServletRequest.html" title="interface in javax.servlet.sip">SipServletRequest</A> <B>createCancel</B>(<A HREF="../../../javax/servlet/sip/SipSession.html" title="interface in javax.servlet.sip">SipSession</A>&nbsp;session)</PRE>
<DL>
<DD>Creates a new CANCEL request to cancel the initial request sent on the other
 leg. The CANCEL is created by the container using the initial request
 stored in the session corresponding to the other leg.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>session</CODE> - the session whose initial request is to be cancelled.
<DT><B>Returns:</B><DD>the new CANCEL request to be sent on the other leg
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if the session is null</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/servlet/sip/AuthInfo.html" title="interface in javax.servlet.sip"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/servlet/sip/ConvergedHttpSession.html" title="interface in javax.servlet.sip"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?javax/servlet/sip/B2buaHelper.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="B2buaHelper.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
